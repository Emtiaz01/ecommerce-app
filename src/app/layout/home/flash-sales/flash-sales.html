<section class="page-container">
  <!-- Section Header -->
  <div class="section-header">
    <div class="title-container">
      <div class="decorative">
        <div class="decorative-line"></div>
        <span class="category-tag">{{ 'Today\'s' | translate }}</span>
      </div>
      <h2 class="section-title">{{ 'Flash Sales' | translate }}</h2>
    </div>

    <!-- Countdown Timer -->
    <div class="countdown-timer">
      <div class="time-block">
        <span class="label">{{ 'Days' | translate }}</span>
        <span class="value">{{ timeLeft().days }}</span>
      </div>
      <span class="separator">:</span>
      <div class="time-block">
        <span class="label">{{ 'Hours' | translate }}</span>
        <span class="value">{{ timeLeft().hours }}</span>
      </div>
      <span class="separator">:</span>
      <div class="time-block">
        <span class="label">{{ 'Minutes' | translate }}</span>
        <span class="value">{{ timeLeft().minutes }}</span>
      </div>
      <span class="separator">:</span>
      <div class="time-block">
        <span class="label">{{ 'Seconds' | translate }}</span>
        <span class="value">{{ timeLeft().seconds }}</span>
      </div>
    </div>

    <!-- Navigation Arrows -->
    <div class="carousel-nav">
      <button class="nav-arrow" (click)="scroll('left')">&larr;</button>
      <button class="nav-arrow" (click)="scroll('right')">&rarr;</button>
    </div>
  </div>

  <!-- Product Carousel -->
  <div 
    class="product-carousel" 
    #productCarousel 
    [class.expanded-grid]="showAll()">
    <div class="product-card" *ngFor="let product of showAll() ? products() : products().slice(0, 10)" (click)="viewProduct(product.id)">
      <div class="card-image-container">
        <span class="discount-badge">-{{ product.discountPercentage | number:'1.0-0' | translate }}%</span>
        <img [ngSrc]="product.thumbnail" [alt]="product.title" class="product-image" width="270" height="250">
        <div class="card-actions">
          <button class="action-btn wishlist-btn" [appAddToWishlist]="product" [attr.aria-label]="'Add ' + product.title + ' to wishlist'"></button>
          <button class="action-btn view-btn" (click)="viewProduct(product.id)" [attr.aria-label]="'View details for ' + product.title"></button>
        </div>
        <button class="add-to-cart-btn" [protectedClick]="AddToCart.bind(this)" [appAddToCart]="product">{{ 'Add To Cart' | translate }}</button>
      </div>
      
      <div class="card-content">
        <h3 class="product-name">{{ product.title | translate }}</h3>
        <div class="price-container">
          <span class="discounted-price">{{ calculateDiscountedPrice(product.price, product.discountPercentage) | currency | translate }}</span>
          <span class="original-price">{{ product.price | currency | translate }}</span>
        </div>
        <div class="rating-container">
          <span class="stars">★★★★★</span>
          <span class="review-count">({{ product.stock | translate }})</span>
        </div>
      </div>
    </div>
  </div>

  <div class="section-footer">
    <button class="view-all-btn" (click)="toggleViewAll()" aria-label="Toggle view all flash sale products">
      {{ showAll() ? ('Show Less' | translate) : ('View All Products' | translate) }}
    </button>
    <hr>
  </div>
</section>
